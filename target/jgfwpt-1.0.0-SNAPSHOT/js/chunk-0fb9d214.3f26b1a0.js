(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fb9d214"],{"0675":function(t,e,a){"use strict";var n=a("243a"),r=a.n(n);r.a},"11e9":function(t,e,a){var n=a("52a7"),r=a("4630"),i=a("6821"),o=a("6a99"),c=a("69a8"),s=a("c69a"),l=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?l:function(t,e){if(t=i(t),e=o(e,!0),s)try{return l(t,e)}catch(a){}if(c(t,e))return r(!n.f.call(t,e),t[e])}},"243a":function(t,e,a){},"32c9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-template-wrapper"},[a("div",{staticClass:"tw-template-body"},[a("el-form",{staticClass:"tw-query-bar",attrs:{inline:!0,model:t.query,size:"small"}},[a("el-form-item",[a("el-autocomplete",{staticClass:"inline-input",attrs:{placeholder:"公司名称","fetch-suggestions":t.queryCompanyNameSearch,"trigger-on-focus":!1},model:{value:t.query.companyName,callback:function(e){t.$set(t.query,"companyName",e)},expression:"query.companyName"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始日期"},model:{value:t.query.stime,callback:function(e){t.$set(t.query,"stime",e)},expression:"query.stime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束日期"},model:{value:t.query.etime,callback:function(e){t.$set(t.query,"etime",e)},expression:"query.etime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleQueryClick}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleExportClick}},[t._v("导出")])],1)],1),a("div",{staticClass:"tw-query-panel"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:t.filterGoodrateList,border:"",size:"small",height:"calc(100% - 42px)"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"gsmc",label:"公司名称","min-width":"180"}}),a("el-table-column",{attrs:{prop:"gzcls",label:"故障车辆数",width:"180"}}),a("el-table-column",{attrs:{prop:"gzl",label:"故障率",width:"180"}}),a("el-table-column",{attrs:{prop:"ywxcls",label:"已维修车辆数",width:"180"}}),a("el-table-column",{attrs:{prop:"xcl",label:"修车率",width:"180"}})],1),a("el-pagination",{attrs:{background:"","page-size":t.table.pageSize,"current-page":t.table.currentPage,total:t.table.total,layout:"prev, pager, next, total"},on:{"current-change":t.handleTablePageCurrentChange}})],1)],1),a("div",{staticClass:"tw-template-right"},[a("v-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"vehicleChart",staticClass:"vehicleChart",attrs:{options:t.vehicleChartOptions}})],1)])},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=a("17fb"),c=a.n(o),s=a("bc3a"),l=a.n(s),u=a("c1df"),f=a.n(u),p=a("9ca8"),m=a("4501"),d=a("2f62");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={name:"GoodRateStatistics",data:function(){return{query:{companyName:"",stime:"",etime:""},table:{loading:!1,data:[],pageSize:20,currentPage:1,total:0},vehicleChartOptions:{color:["#19d4ae","#fa6e86","#5ab1ef"],tooltip:{show:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{top:60,left:"center",data:["已维修","故障","完好"]},series:[{name:"车辆",type:"pie",radius:"55%",center:["50%","50%"],data:[{name:"已维修",value:3530},{name:"故障",value:2923},{name:"完好",value:1393}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.query.stime=f()(f()().subtract(1,"days").format("YYYY-MM-DD 00:00:00")),t.query.etime=f()(f()().format("YYYY-MM-DD 23:59:59")),t.getGoodrate(),window.onresize=function(){t.$refs.vehicleChart.resize()}}))},computed:h({},Object(d["b"])(["getCompanyName"]),{filterGoodrateList:function(){var t=this.table,e=t.data,a=t.pageSize,n=t.currentPage,r=n-1;return c.a.filter(e,(function(t,e){return e>=r*a&&e<n*a}))}}),methods:{queryCompanyNameSearch:function(t,e){e(c.a.filter(this.getCompanyName,(function(e){return e.label.indexOf(t)>-1})))},getGoodrate:function(){var t=this,e=this.query,a=e.companyName,n=e.stime,r=e.etime;this.table.loading=!0,l.a.get("terminal/goodrate",{baseURL:this.baseURL,params:{companyName:a,stime:n&&f()(n).format("YYYY-MM-DD HH:mm:ss"),etime:r&&f()(r).format("YYYY-MM-DD HH:mm:ss")}}).then((function(e){var a=e.data.echart;t.vehicleChartOptions.series[0].data=[{name:"已维修",value:c.a.pluck(a,"WXZS")[0]},{name:"故障",value:c.a.pluck(a,"GZZS")[0]},{name:"完好",value:c.a.pluck(a,"ZS")[0]-c.a.pluck(a,"GZZS")[0]-c.a.pluck(a,"WXZS")[0]}],t.table.data=c.a.map(e.data.list,(function(t){return{gsmc:t.COMP_NAME,gzcls:t.GZZS,gzl:t.GZL,ywxcls:t.WXZS,xcl:t.XCL}})),t.table.total=t.table.data.length,t.table.currentPage=1,t.table.loading=!1})).catch((function(t){console.log(t)}))},handleQueryClick:function(){this.getGoodrate(),this.vehicleChartOptions.series[0].data=[{name:"已维修",value:2530},{name:"故障",value:2323},{name:"完好",value:2393}]},handleExportClick:function(){var t=this,e=this.query,a=e.companyName,n=e.stime,r=e.etime;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then((function(){window.open("".concat(t.baseURL,"terminal/goodratedc?companyName=").concat(a,"&stime=").concat(n&&f()(n).format("YYYY-MM-DD HH:mm:ss"),"&etime=").concat(r&&f()(r).format("YYYY-MM-DD HH:mm:ss")))})).catch((function(){}))},handleTablePageCurrentChange:function(t){this.table.currentPage=t}},components:{Malfunction:m["a"],"v-chart":p["a"]}},y=g,v=(a("b506"),a("2877")),S=Object(v["a"])(y,n,r,!1,null,"f387470a",null);e["default"]=S.exports},"3d4e":function(t,e,a){},"44d8":function(t,e,a){},4501:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tw-icon",{staticClass:"faultJudgment",class:t.formatReviewClassName(t.fault),attrs:{icon:t.formatFaultJudgment(t.fault)}})},r=[],i=(a("c5f6"),a("ee88")),o={name:"Malfunction",props:{fault:Number},methods:{formatFaultJudgment:function(t){switch(console.info("formatFaultJudgment:",t),t){case 0:return"icon-true";case 1:return"icon-false";default:return""}},formatReviewClassName:function(t){switch(t){case 0:return"tw-text-success";case 1:return"tw-text-error"}}},components:{"tw-icon":i["a"]}},c=o,s=(a("0675"),a("2877")),l=Object(s["a"])(c,n,r,!1,null,"21714977",null);e["a"]=l.exports},"454f":function(t,e,a){a("46a7");var n=a("584a").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},"456d":function(t,e,a){var n=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(t){return r(n(t))}}))},"46a7":function(t,e,a){var n=a("63b6");n(n.S+n.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"5dbc":function(t,e,a){var n=a("d3f4"),r=a("8b97").set;t.exports=function(t,e,a){var i,o=e.constructor;return o!==a&&"function"==typeof o&&(i=o.prototype)!==a.prototype&&n(i)&&r&&r(t,i),t}},"5eda":function(t,e,a){var n=a("5ca1"),r=a("8378"),i=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],o={};o[t]=e(a),n(n.S+n.F*i((function(){a(1)})),"Object",o)}},7973:function(t,e,a){"use strict";var n=a("3d4e"),r=a.n(n);r.a},"85f2":function(t,e,a){t.exports=a("454f")},"8b97":function(t,e,a){var n=a("d3f4"),r=a("cb7c"),i=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,a){return i(t,a),e?t.__proto__=a:n(t,a),t}}({},!1):void 0),check:i}},"8e6e":function(t,e,a){var n=a("5ca1"),r=a("990b"),i=a("6821"),o=a("11e9"),c=a("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,n=i(t),s=o.f,l=r(n),u={},f=0;while(l.length>f)a=s(n,e=l[f++]),void 0!==a&&c(u,e,a);return u}})},9093:function(t,e,a){var n=a("ce10"),r=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},"990b":function(t,e,a){var n=a("9093"),r=a("2621"),i=a("cb7c"),o=a("7726").Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(i(t)),a=r.f;return a?e.concat(a(t)):e}},aa77:function(t,e,a){var n=a("5ca1"),r=a("be13"),i=a("79e5"),o=a("fdef"),c="["+o+"]",s="​",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),f=function(t,e,a){var r={},c=i((function(){return!!o[t]()||s[t]()!=s})),l=r[t]=c?e(p):o[t];a&&(r[a]=l),n(n.P+n.F*c,"String",r)},p=f.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},ac6a:function(t,e,a){for(var n=a("cadf"),r=a("0d58"),i=a("2aba"),o=a("7726"),c=a("32e9"),s=a("84f2"),l=a("2b4c"),u=l("iterator"),f=l("toStringTag"),p=s.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(m),b=0;b<d.length;b++){var h,g=d[b],y=m[g],v=o[g],S=v&&v.prototype;if(S&&(S[u]||c(S,u,p),S[f]||c(S,f,g),s[g]=p,y))for(h in n)S[h]||i(S,h,n[h],!0)}},b506:function(t,e,a){"use strict";var n=a("44d8"),r=a.n(n);r.a},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("85f2"),r=a.n(n);function i(t,e,a){return e in t?r()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},c5f6:function(t,e,a){"use strict";var n=a("7726"),r=a("69a8"),i=a("2d95"),o=a("5dbc"),c=a("6a99"),s=a("79e5"),l=a("9093").f,u=a("11e9").f,f=a("86cc").f,p=a("aa77").trim,m="Number",d=n[m],b=d,h=d.prototype,g=i(a("2aeb")(h))==m,y="trim"in String.prototype,v=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():p(e,3);var a,n,r,i=e.charCodeAt(0);if(43===i||45===i){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var o,s=e.slice(2),l=0,u=s.length;l<u;l++)if(o=s.charCodeAt(l),o<48||o>r)return NaN;return parseInt(s,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof d&&(g?s((function(){h.valueOf.call(a)})):i(a)!=m)?o(new b(v(e)),a,d):v(e)};for(var S,w=a("9e1e")?l(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;w.length>O;O++)r(b,S=w[O])&&!r(d,S)&&f(d,S,u(b,S));d.prototype=h,h.constructor=d,a("2aba")(n,m,d)}},ee88:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-icon",class:t.iconClassName,style:{fontSize:t.styleFontSize}})},r=[],i={name:"TWIcon",props:{icon:String,fontSize:String},computed:{iconClassName:function(){return this.icon&&this.icon.indexOf("icon-")>=0?"iconfont ".concat(this.icon):this.icon},styleFontSize:function(){return this.fontSize||"16px"}}},o=i,c=(a("7973"),a("2877")),s=Object(c["a"])(o,n,r,!1,null,"4746a022",null);e["a"]=s.exports},f1ae:function(t,e,a){"use strict";var n=a("86cc"),r=a("4630");t.exports=function(t,e,a){e in t?n.f(t,e,r(0,a)):t[e]=a}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-0fb9d214.3f26b1a0.js.map
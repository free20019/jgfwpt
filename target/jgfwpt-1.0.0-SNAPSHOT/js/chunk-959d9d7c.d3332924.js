(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-959d9d7c"],{"003f":function(e,t,a){},"9e39":function(e,t,a){"use strict";var l=a("003f"),n=a.n(l);n.a},be38:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tw-template-wrapper"},[a("el-form",{staticClass:"tw-query-bar",attrs:{inline:!0,model:e.query,size:"small"}},[a("el-form-item",[a("el-input",{staticClass:"inline-input",attrs:{placeholder:"主题"},model:{value:e.query.title,callback:function(t){e.$set(e.query,"title",t)},expression:"query.title"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")])],1)],1),a("div",{staticClass:"tw-query-panel"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"tw-table",attrs:{data:e.filterTableList,border:"",size:"small",height:"calc(100% - 42px)"},on:{"row-click":e.handleTableRowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",resizable:!1}}),a("el-table-column",{attrs:{prop:"TIME",label:"时间",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"SJZT",label:"主题","min-width":"180",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"BJR",label:"报警人",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"DJDH",label:"报警人电话",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"JJR",label:"接警人",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"SJJB",label:"事件级别",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"SH",label:"状态",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"DB_TIME",label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.handleDetailClick(t.row)}}})]}}])})],1),a("el-pagination",{staticClass:"tw-pagination",attrs:{background:"","page-size":e.table.pageSize,"current-page":e.table.currentPage,total:e.table.data.length,layout:"prev, pager, next,total"},on:{"current-change":e.handleTablePageCurrentChange}})],1),a("div",{staticClass:"tw-panel tw-panel-layout"},[a("div",{staticClass:"tw-panel tw-panel__left"},[a("div",{staticClass:"tw-panel__title"},[e._v("报警内容")]),a("div",{staticClass:"tw-panel__body"},[e._v(e._s(e.table.selectTableItem.SJJL))])]),a("div",{staticClass:"tw-panel__right"},[a("div",{staticStyle:{"margin-left":"20%",height:"85%"}},[a("el-tree",{ref:"tree",staticClass:"tw-tree",attrs:{data:e.tree.data,"show-checkbox":"","node-key":"id",props:e.tree.props,"default-expanded-keys":[3],"default-checked-keys":[3]}})],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-checkbox",{model:{value:e.select.message,callback:function(t){e.$set(e.select,"message",t)},expression:"select.message"}},[e._v("短信")]),a("el-checkbox",{model:{value:e.select.email,callback:function(t){e.$set(e.select,"email",t)},expression:"select.email"}},[e._v("邮件")]),e._v("     \n        "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSendClick}},[e._v("发送")])],1)])])],1)},n=[],s=a("17fb"),i=a.n(s),r=a("bc3a"),c=a.n(r),o={name:"AbnormalDisposalReport",data:function(){return{query:{title:""},table:{selectItem:{},selectTableItem:{},loading:!1,data:[],pageSize:10,currentPage:1},select:{email:"",message:""},tree:{data:[{id:1,label:"运管局",children:[{id:2,label:"指挥中心",children:[{id:3,label:"金俊"}]}]}],props:{label:"label",children:"children"}}}},mounted:function(){this.findAbnormalDisposalProcess()},computed:{filterTableList:function(){var e=this.table,t=e.data,a=e.pageSize,l=e.currentPage,n=l-1;return i.a.filter(t,(function(e,t){return t>=n*a&&t<l*a}))}},methods:{findAbnormalDisposalProcess:function(){var e=this,t=this.query.title;this.table.loading=!0,this.table.selectTableItem={},c.a.get("keyArea/findAbnormalDisposalProcess",{baseURL:this.baseURL,params:{sjzt:t}}).then((function(t){e.table.data=t.data||[],e.table.total=e.table.data.length,e.table.currentPage=1,e.table.loading=!1})).catch((function(e){console.log(e)}))},handleQueryClick:function(){this.findAbnormalDisposalProcess()},handleDetailClick:function(e){var t=this;this.$confirm("确定审核吗?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then((function(){c.a.get("keyArea/auditAbnormalDisposalProcess",{baseURL:t.baseURL,params:{id:e.ID}}).then((function(e){e.data>0?(t.$message({message:"操作成功!",type:"success"}),t.findAbnormalDisposalProcess()):t.$message.error("操作失败！")})).catch((function(e){console.error(e)}))})).catch((function(){}))},handleSendClick:function(){0===this.$refs.tree.getCheckedNodes().length?this.$message.error("请选择接收人！"):this.select.email||this.select.message?this.$message.success("发送成功！"):this.$message.error("请勾选发送短信或邮箱！")},handleTableRowClick:function(e){this.table.selectTableItem=e},handleTablePageCurrentChange:function(e){this.table.currentPage=e}}},d=o,u=(a("9e39"),a("2877")),b=Object(u["a"])(d,l,n,!1,null,"66115b52",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-959d9d7c.d3332924.js.map